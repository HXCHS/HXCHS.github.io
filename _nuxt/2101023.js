(window.webpackJsonp=window.webpackJsonp||[]).push([[66,54],{621:function(e,t,r){"use strict";r.r(t);r(101);var n=r(28),o=r(29),l=r(49),c=r(48),d=r(24),f=r(9),v=(r(33),r(10),r(154),r(59),r(261),r(17));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(c.a)(this,r)}}var m=function(e,t,r,desc){var n,o=arguments.length,l=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(l=(o<3?n(l):o>3?n(t,r,l):n(t,r))||l);return o>3&&l&&Object.defineProperty(t,r,l),l},y=function(e){Object(l.a)(r,e);var t=h(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).avatarError=!1,e}return Object(o.a)(r,[{key:"getAvatarURL",get:function(){var e;return null!==(e=this.user)&&void 0!==e&&e.avatar&&!this.avatarError?"https://cdn.discordapp.com/avatars/"+(this.user._id||this.user.id)+"/"+this.user.avatar+"."+this.avatarFormat+"?size="+this.size:"https://cdn.discordapp.com/embed/avatars/"+this.defaultAvatar+".png"}},{key:"altText",get:function(){return this.user?(this.user.displayName||this.user.username)+"'s Discord Avatar":"Default Discord Avatar"}},{key:"avatarFormat",get:function(){var e;return null!==(e=this.user)&&void 0!==e&&null!==(e=e.avatar)&&void 0!==e&&e.startsWith("a_")?"gif":"webp"}},{key:"defaultAvatar",get:function(){var e,t;return((BigInt((null===(e=this.user)||void 0===e?void 0:e._id)||(null===(t=this.user)||void 0===t?void 0:t.id))>>22n)%6n).toString()}}]),r}(v.Vue);m([Object(v.Prop)({type:Object,default:function(){return null},required:!1})],y.prototype,"user",void 0),m([Object(v.Prop)({type:Number,default:function(){return 128}})],y.prototype,"size",void 0),m([Object(v.Prop)({type:Boolean,default:function(){return!1}})],y.prototype,"draggable",void 0);var _=y=m([v.Component],y),O=r(45),component=Object(O.a)(_,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("img",{staticClass:"is-rounded",attrs:{src:e.getAvatarURL,draggable:e.draggable,alt:e.altText},on:{error:function(t){e.avatarError=!0}}})}),[],!1,null,null,null);t.default=component.exports},700:function(e,t,r){var content=r(779);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(67).default)("00070f3d",content,!0,{sourceMap:!1})},778:function(e,t,r){"use strict";r(700)},779:function(e,t,r){var n=r(66)((function(i){return i[1]}));n.push([e.i,".leaderboard-first{color:gold}.leaderboard-second{color:silver}.leaderboard-third{color:#cd7f32}.leaderboard-user{align-items:center;display:flex}.leaderboard-user span{margin-left:.5rem}",""]),n.locals={},e.exports=n},895:function(e,t,r){"use strict";r.r(t);r(58),r(101);var n=r(40),o=r(2),l=r(28),c=r(29),d=r(49),f=r(48),v=r(24),h=r(9),m=(r(20),r(33),r(10),r(34),r(90),r(110),r(386),r(17));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(v.a)(e);if(t){var o=Object(v.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(f.a)(this,r)}}var _=function(e,t,r,desc){var n,o=arguments.length,l=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(l=(o<3?n(l):o>3?n(t,r,l):n(t,r))||l);return o>3&&l&&Object.defineProperty(t,r,l),l},O=function(e){Object(d.a)(f,e);var t,r=y(f);function f(){var e;return Object(l.a)(this,f),(e=r.apply(this,arguments)).leaderboardFilter="",e}return Object(c.a)(f,[{key:"self",get:function(){return this.$store.getters["accounts/user"]}},{key:"beforeMount",value:(t=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("teams/getTeams");case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"leaderboard",get:function(){return this.$store.getters["orders/leaderboard"]}},{key:"leaderboardData",get:function(){var e,t=this;return null===(e=this.leaderboard)||void 0===e?void 0:e.filter((function(e){return(null==e?void 0:e.id)===t.leaderboardFilter||((null==e?void 0:e.username)||"").toLowerCase().includes(t.leaderboardFilter.toLowerCase())}))}},{key:"getLeaderboardPosition",value:function(e){var t;return(null===(t=this.leaderboard)||void 0===t?void 0:t.indexOf(e))+1}},{key:"getUserOrders",value:function(e){var t,r,n,o=null==e||null===(t=e.statistics)||void 0===t?void 0:t.orders;return{totalOrders:null!==(r=null==o?void 0:o.totalOrders)&&void 0!==r?r:0,weeklyOrders:null!==(n=null==o?void 0:o.weeklyOrders)&&void 0!==n?n:0}}},{key:"getUserTeam",value:function(e){return this.$store.getters["teams/teams"].filter((function(t){return t._id===e.team}))[0]}},{key:"teamsEnabled",get:function(){return this.$store.getters["settings/getSetting"]("teamsEnabled")}},{key:"teams",get:function(){return this.$store.getters["teams/teams"]}},{key:"sortedTeams",get:function(){return Object(n.a)(this.teams).sort((function(a,b){return b.orders-a.orders}))}}]),f}(m.Vue),w=O=_([Object(m.Component)({asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.store,n=e.error,t.prev=1,t.next=4,r.dispatch("orders/getLeaderboard");case 4:t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(1),t.abrupt("return",n({statusCode:t.t0.statusCode,message:t.t0.message}));case 9:case"end":return t.stop()}}),t,null,[[1,6]])})))()},head:function(){return{title:"Leaderboard"}}})],O),k=(r(778),r(45)),component=Object(k.a)(w,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("section",{staticClass:"section"},[t("div",{staticClass:"container"},[t("div",{staticClass:"box"},[t("h4",{staticClass:"title is-4"},[t("b-icon",{attrs:{icon:"list"}}),e._v("\n          Leaderboard\n        ")],1),e._v(" "),t("h5",{staticClass:"subtitle"},[e._v("\n          Who has made it to the top of the leaderboard this week?\n        ")])]),e._v(" "),e.teamsEnabled?t("div",{staticClass:"box"},[t("h4",{staticClass:"title is-4"},[t("b-icon",{attrs:{icon:"trophy"}}),e._v("\n          Team Leaderboard\n        ")],1),e._v(" "),t("div",{staticClass:"columns is-multiline is-centered"},e._l(e.sortedTeams,(function(r,i){var n;return t("div",{key:r._id,staticClass:"column is-one-quarter"},[t("div",{staticClass:"box is-grey has-text-centered"},[t("h4",{staticClass:"title is-4"},[i+1===1?t("b-icon",{staticClass:"leaderboard-first",attrs:{icon:"trophy"}}):e._e(),e._v(" "),i+1===2?t("b-icon",{staticClass:"leaderboard-second",attrs:{icon:"medal"}}):e._e(),e._v(" "),i+1===3?t("b-icon",{staticClass:"leaderboard-third",attrs:{icon:"award"}}):e._e(),e._v("\n                "+e._s(r.name)+"\n              ")],1),e._v(" "),t("h4",{staticClass:"subtitle is-5"},[e._v("\n                "+e._s(null===(n=r.orders)||void 0===n?void 0:n.toLocaleString())+" orders\n              ")])])])})),0)]):e._e(),e._v(" "),t("div",{staticClass:"box"},[t("b-field",[t("b-input",{attrs:{icon:"user",placeholder:"Start searching for a user...",size:"is-medium"},model:{value:e.leaderboardFilter,callback:function(t){e.leaderboardFilter=t},expression:"leaderboardFilter"}})],1),e._v(" "),t("b-table",{attrs:{data:e.leaderboardData,"per-page":30,paginated:""},scopedSlots:e._u([{key:"empty",fn:function(){return[t("span",{staticClass:"has-text-weight-bold has-text-warning is-size-6"},[t("b-icon",{attrs:{icon:"times-circle"}}),e._v("\n              There is nobody to list on the leaderboard at the moment.\n            ")],1)]},proxy:!0}])},[t("b-table-column",{attrs:{label:"Position"},scopedSlots:e._u([{key:"default",fn:function(r){return[1===e.getLeaderboardPosition(r.row)?t("b-icon",{staticClass:"leaderboard-first",attrs:{icon:"trophy"}}):2===e.getLeaderboardPosition(r.row)?t("b-icon",{staticClass:"leaderboard-second",attrs:{icon:"medal"}}):3===e.getLeaderboardPosition(r.row)?t("b-icon",{staticClass:"leaderboard-third",attrs:{icon:"award"}}):t("b-icon",{staticClass:"has-text-weight-bold",attrs:{icon:"hashtag"}}),e._v("\n            "+e._s(e.getLeaderboardPosition(r.row))+"\n          ")]}}])}),e._v(" "),t("b-table-column",{attrs:{label:"User"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("div",{staticClass:"leaderboard-user"},[t("figure",{staticClass:"image is-32x32"},[t("UserAvatar",{attrs:{user:r.row}})],1),e._v(" "),e.teamsEnabled?t("b-tag",{attrs:{type:"is-info"}},[e._v("\n                "+e._s(e.getUserTeam(r.row).name||"No Team")+"\n              ")]):e._e(),e._v(" "),t("span",[e._v("\n                "+e._s(r.row.displayName||r.row.username)+"\n              ")])],1)]}}])}),e._v(" "),t("b-table-column",{attrs:{width:"50%"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("b-progress",{attrs:{value:e.getUserOrders(r.row).weeklyOrders,max:30,size:"is-medium",type:"is-info","show-value":!0}},[e._v("\n              "+e._s(e.getUserOrders(r.row).weeklyOrders)+" / 30\n            ")])]}}])}),e._v(" "),t("b-table-column",{scopedSlots:e._u([{key:"default",fn:function(r){var n;return[t("b-button",{staticClass:"has-text-weight-bold",attrs:{tag:"nuxt-link",to:"/users/"+(r.row._id===(null===(n=e.self)||void 0===n?void 0:n._id)?"@me":r.row._id),type:"is-primary","icon-left":"user",size:"is-small"}},[e._v("\n              View Profile\n            ")])]}}])})],1),e._v(" "),t("Ad",{attrs:{id:"leaderboard"}})],1)])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{UserAvatar:r(621).default,Ad:r(385).default})}}]);